{% load static %}
{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    {% tailwind_css %}
    <title>{% block title %}Pharmacy Inventory Management{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'fontawesomefree/css/fontawesome.css' %}" type='text/css'>
    <link rel="stylesheet" href="{% static 'fontawesomefree/css/solid.css' %}" type='text/css'>
    <link rel="stylesheet" href="{% static 'fontawesomefree/css/brands.css' %}" type="text/css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <!-- UIkit CSS -->
<link rel="stylesheet" href="{% static 'uikit/css/uikit.min.css' %}" type="text/css">

<!-- UIkit JS -->
<script src="{% static 'uikit/js/uikit.min.js' %}"></script>
<script src="{% static 'uikit/js/uikit-icons.js' %}"></script>
</head>
    <style>
      a{
          text-decoration: none;
      }
      a:hover{
          text-decoration: none;
      }	
  /* For WebKit browsers (Chrome, Safari) */
  ::-webkit-scrollbar {
      width: 10px;
  }
  
  ::-webkit-scrollbar-thumb {
      background: #4a90e2;
      border-radius: 5px;
  }
  
  ::-webkit-scrollbar-track {
      background: #f1f1f1;
  }
  
  /* For Firefox */
  * {
      scrollbar-width: auto;
      scrollbar-color: #4a90e2 #f1f1f1;
  }
  
    </style>
<body class="bg-gradient-to-r from-blue-50 to-sky-50 min-h-screen flex flex-col">
    <header class="bg-gradient-to-r from-blue-600  to-sky-600 shadow-lg">
        <nav class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    {% if request.user.is_authenticated %}
                    <a href="/" class="text-white hover:text-green-200 font-semibold transition duration-300 text-sm">
                        <i class="fa fa-solid fa-home-alt fa-2x"></i>
                    </a>
                    <span class="text-white text-xs">
                        welcome, <strong class="uppercase">{{ request.user.first_name|default:request.user.username }} {{ request.user.last_name|default:'' }}</strong>
                    </span>
               {%if request.user.is_superuser%} <a href="{% url 'admin:index' %}" class="text-white hover:text-green-200 transition duration-300 text-xs border-b-2">Control Panel</a>{%endif%}
                {%endif%}
                </div>
                <div class="hidden md:flex items-center space-x-4 uppercase text-xs">
                    {% if request.user.is_authenticated and request.path != "/" %}
                    <a href="{% url 'main_store' %}" class="text-white hover:text-green-200 transition duration-300 border-b-2 border-transparent hover:border-white"><span class="">MAIN STORE</span></a>
                    <a href="{% url 'store_list' %}" class="text-white hover:text-green-200 transition duration-300 border-b-2 border-transparent hover:border-white"><span class="">UNITS</span></a>
                    {%if request.user.is_superuser%}
                    <a href="{% url 'worth' %}" class="text-white hover:text-green-200 transition duration-300 border-b-2 border-transparent hover:border-white">
                        <span class="">value</span></a> {%endif%}
                    {% endif %}
                    {% if request.user.is_authenticated %}
                    <form method="POST" action="{% url 'logout' %}" >
                        {% csrf_token %}
                        <button type="submit" class="bg-red-600 hover:bg-white hover:text-red-600 hover:border hover:border-rose-600 uppercase text-white px-4 py-2 shadow-md hover:shadow-lg rounded-lg text-xs">
                            <i class="fa-solid fa-sign-out-alt mr-2"></i>Logout
                        </button>
                    </form>
                    {% endif %}
                </div>
                <button class="md:hidden text-white focus:outline-none" id="mobile-menu-button">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <div class="md:hidden hidden uppercase text-xs" id="mobile-menu">
                {% if request.user.is_authenticated and request.path != "/" %}
                <a href="{% url 'main_store' %}" class="block py-2 text-white hover:text-green-200 transition duration-300"><span class="">
                    MAIN STORE
                </span> 
                </a>

                <a href="{% url 'store_list' %}" class="text-white hover:text-green-200 transition duration-300 border-b-2 border-transparent hover:border-white"><span class="">
                    UNITS
                </span>
                </a>
                <a href="{% url 'worth' %}" class="block py-2 text-white hover:text-green-200 transition duration-300"><span class="">
                    value
                </span>
                </a>
                {% endif %}
                {% if request.user.is_authenticated %}
                <form method="POST" action="{% url 'logout' %}" >
                    {% csrf_token %}
                    <button type="submit" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 transition duration-300 shadow-md hover:shadow-lg rounded-lg text-xs m-2">
                        <i class="fa-solid fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </form>
                {% else %}
                <a href="{% url 'signin' %}" class="block py-2 text-xs text-white hover:text-green-200 transition duration-300">
                    <i class="fa-solid fa-sign-in-alt mr-2"></i>Sign In
                </a>
                {% endif %}
            </div>
        </nav>
    </header>

    <main class="flex-grow container mx-auto px-2">
        {% if messages %}
        <div class="rounded-md bg-green-50 p-2 m-2 w-fit mx-auto" uk-alert>
            <a href class="uk-alert-close " uk-close></a>
                    <div class="text-sm text-green-600" role="alert">
                            {% for message in messages %}
                                <p class=" text-center uppercase text-blue-700"> <i class="fa-solid fa-message fa-2x text-blue-500"></i> <br>{{ message }}</p>
                            {% endfor %}
            </div>
        </div>
    {% endif %}
        {% block content %}
        
        {% endblock %}
    </main>

    <!-- <footer class="bg-green-50 text-gray-700 py-2 mt-1">
        <div class="container mx-auto text-center">
            <p class="text-xs mb-1">
                &copy; 2024 Pharmacy Inventory Management. Powered by
                <a class="text-xs uppercase text-green-700 rounded-md px-1" href="#">Green Edge Technologies NG</a>.
                All rights reserved.
            </p>
            <p class="text-xs">
                Phone: 0806 662 6200, 0802 671 3714 &bull; Email: <a href="mailto:info@greenedgeng.com" class="text-green-700">info@greenedgeng.com</a> &bull; Website: <a href="http://www.greenedgeng.com" class="text-green-700" target="_blank" rel="noopener noreferrer">www.greenedgeng.com</a>
            </p>
        </div>
    </footer> -->
    
    <script>
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

         // Set the session duration and warning time
    const sessionAge = {{ session_cookie_age|default:300 }} * 1000; // Total session duration in milliseconds
    const warningTime = sessionAge - 60000; // Show warning 1 minute before expiration

    // Display a warning 1 minute before the session expires
    setTimeout(() => {
        alert("Your session will expire in 1 minute. Please save your work or refresh the page to stay logged in.");
    }, warningTime);
    </script>
</body>
</html>